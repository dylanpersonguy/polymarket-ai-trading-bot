/* ─── Reset & Base ─────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
    --bg: #0f1117;
    --bg-card: #1a1d27;
    --bg-panel: #161922;
    --bg-table-row: #1e2130;
    --bg-hover: #252838;
    --bg-input: #1e2130;
    --border: #2a2d3a;
    --border-focus: #4c8dff;
    --text: #e4e6f0;
    --text-dim: #8b8fa3;
    --text-muted: #5a5e72;
    --accent-blue: #4c8dff;
    --accent-green: #00d68f;
    --accent-red: #ff4d6a;
    --accent-orange: #ff9f43;
    --accent-purple: #a855f7;
    --accent-teal: #14b8a6;
    --accent-pink: #f472b6;
    --accent-yellow: #fbbf24;
    --font: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-mono: 'SF Mono', 'Fira Code', 'Consolas', monospace;
    --radius: 12px;
    --radius-sm: 8px;
}

body {
    font-family: var(--font);
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    min-height: 100vh;
    padding: 0 24px 40px;
    max-width: 1600px;
    margin: 0 auto;
}

/* ─── Header ───────────────────────────────────────────────────── */
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 0;
    border-bottom: 1px solid var(--border);
    margin-bottom: 24px;
    position: sticky;
    top: 0;
    background: var(--bg);
    z-index: 100;
}
header h1 { font-size: 1.5rem; font-weight: 700; letter-spacing: -0.02em; }
.subtitle { color: var(--text-dim); font-size: 0.85rem; margin-left: 12px; }
.header-right { display: flex; align-items: center; gap: 12px; }
.last-updated { font-size: 0.75rem; color: var(--text-muted); }

.badge {
    font-size: 0.7rem;
    font-weight: 700;
    letter-spacing: 0.05em;
    padding: 4px 10px;
    border-radius: 4px;
    text-transform: uppercase;
}
.badge-paper { background: var(--accent-orange); color: #000; }
.badge-live { background: var(--accent-red); color: #fff; animation: pulse-live 2s infinite; }
.badge-ok { background: var(--accent-green); color: #000; }
.badge-danger { background: var(--accent-red); color: #fff; }

@keyframes pulse-live {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

/* ─── Card Grid ────────────────────────────────────────────────── */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
}

.card {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 20px;
    border-left: 4px solid var(--border);
    transition: transform 0.15s, box-shadow 0.15s;
}
.card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,0.3); }

.card.accent-blue   { border-left-color: var(--accent-blue); }
.card.accent-green  { border-left-color: var(--accent-green); }
.card.accent-purple { border-left-color: var(--accent-purple); }
.card.accent-orange { border-left-color: var(--accent-orange); }
.card.accent-teal   { border-left-color: var(--accent-teal); }
.card.accent-pink   { border-left-color: var(--accent-pink); }

.card-label { font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.06em; font-weight: 600; }
.card-value { font-size: 1.8rem; font-weight: 700; margin: 4px 0; font-family: var(--font-mono); letter-spacing: -0.02em; }
.card-sub { font-size: 0.78rem; color: var(--text-muted); }

/* ─── Charts ───────────────────────────────────────────────────── */
.charts-row {
    display: grid;
    grid-template-columns: 1fr 1fr 0.7fr;
    gap: 16px;
    margin-bottom: 24px;
}
.charts-row-single {
    grid-template-columns: 1fr;
}
.chart-container {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 20px;
}
.chart-container h3 { font-size: 0.9rem; margin-bottom: 12px; font-weight: 600; }
.chart-container canvas { width: 100% !important; max-height: 240px; }
.chart-wide canvas { max-height: 280px; }

/* ─── Panel ────────────────────────────────────────────────────── */
.panel {
    background: var(--bg-panel);
    border-radius: var(--radius);
    padding: 24px;
    margin-bottom: 20px;
    border: 1px solid var(--border);
}
.panel h2 { font-size: 1.1rem; font-weight: 700; margin-bottom: 16px; }

.panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    flex-wrap: wrap;
    gap: 12px;
}
.panel-header h2 { margin-bottom: 0; }
.panel-tools {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* ─── Search Input ─────────────────────────────────────────────── */
.search-input {
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--text);
    font-family: var(--font);
    font-size: 0.78rem;
    padding: 6px 12px;
    width: 200px;
    transition: border-color 0.2s;
}
.search-input:focus {
    outline: none;
    border-color: var(--border-focus);
}
.search-input::placeholder { color: var(--text-muted); }

/* ─── Risk Monitor ─────────────────────────────────────────────── */
.risk-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin-bottom: 16px; }

.risk-item { background: var(--bg-card); border-radius: var(--radius-sm); padding: 16px; }
.risk-label { font-size: 0.8rem; color: var(--text-dim); margin-bottom: 8px; font-weight: 600; }
.risk-bar-container { background: #252838; border-radius: 6px; height: 10px; overflow: hidden; margin-bottom: 6px; }
.risk-bar { height: 100%; border-radius: 6px; background: var(--accent-green); transition: width 0.6s ease, background 0.3s; }
.risk-bar.warning { background: var(--accent-orange); }
.risk-bar.danger { background: var(--accent-red); }
.bar-inverted { background: var(--accent-blue); }
.risk-values { font-size: 0.78rem; color: var(--text-muted); font-family: var(--font-mono); }

.risk-params {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 8px;
}
.risk-param {
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    padding: 10px 14px;
    font-size: 0.8rem;
}
.risk-param .rp-label { color: var(--text-dim); font-size: 0.7rem; text-transform: uppercase; }
.risk-param .rp-value { font-family: var(--font-mono); font-weight: 600; margin-top: 2px; }

/* ─── Tables ───────────────────────────────────────────────────── */
.table-wrap { overflow-x: auto; }

table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.82rem;
}
thead th {
    text-align: left;
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-dim);
    padding: 10px 12px;
    border-bottom: 1px solid var(--border);
    font-weight: 600;
    white-space: nowrap;
}
tbody td {
    padding: 10px 12px;
    border-bottom: 1px solid rgba(42, 45, 58, 0.5);
    vertical-align: middle;
}
tbody tr:hover { background: var(--bg-hover); }

.empty-state {
    text-align: center;
    color: var(--text-muted);
    padding: 32px 12px !important;
    font-style: italic;
}

/* ─── Decision/Status Pills ────────────────────────────────────── */
.pill {
    display: inline-block;
    font-size: 0.68rem;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
}
.pill-trade  { background: rgba(0,214,143,0.15); color: var(--accent-green); }
.pill-no-trade { background: rgba(255,77,106,0.12); color: var(--accent-red); }
.pill-filled { background: rgba(76,141,255,0.15); color: var(--accent-blue); }
.pill-dry    { background: rgba(255,159,67,0.15); color: var(--accent-orange); }
.pill-buy    { background: rgba(0,214,143,0.15); color: var(--accent-green); }
.pill-sell   { background: rgba(255,77,106,0.12); color: var(--accent-red); }

.pnl-positive { color: var(--accent-green); }
.pnl-negative { color: var(--accent-red); }
.pnl-zero    { color: var(--text-muted); }

/* ─── Live PNL Styling ─────────────────────────────────────────── */
.pnl-summary-strip {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    padding: 10px 18px;
    background: rgba(255,255,255,0.02);
    border-bottom: 1px solid var(--border);
    font-size: 0.78rem;
}
.pnl-stat { display: flex; align-items: center; gap: 4px; }
.pnl-stat strong { font-weight: 700; }

.live-price { font-variant-numeric: tabular-nums; }
.price-arrow { font-size: 0.7rem; margin-left: 3px; font-weight: 700; }
.price-up   { color: var(--accent-green); }
.price-down { color: var(--accent-red); }
.price-flat { color: var(--text-muted); }

.pnl-value { font-weight: 700; font-variant-numeric: tabular-nums; }

.pnl-badge {
    display: inline-block;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 10px;
    font-variant-numeric: tabular-nums;
}
.pnl-badge-pos {
    background: rgba(0,214,143,0.12);
    color: var(--accent-green);
}
.pnl-badge-neg {
    background: rgba(255,77,106,0.10);
    color: var(--accent-red);
}
.pnl-badge-flat {
    background: rgba(255,255,255,0.06);
    color: var(--text-muted);
}

.position-row { transition: background 0.3s ease; }
.position-row:hover { background: rgba(255,255,255,0.04); }
.position-row.pnl-positive { border-left: 3px solid var(--accent-green); }
.position-row.pnl-negative { border-left: 3px solid var(--accent-red); }
.position-row.pnl-zero     { border-left: 3px solid var(--border); }

/* ─── Buttons ──────────────────────────────────────────────────── */
.btn {
    display: inline-block;
    font-size: 0.72rem;
    font-weight: 700;
    padding: 6px 14px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    transition: opacity 0.2s, transform 0.1s;
}
.btn:hover { opacity: 0.85; transform: translateY(-1px); }
.btn:active { transform: translateY(0); }
.btn-danger { background: var(--accent-red); color: #fff; }
.btn-ok     { background: var(--accent-green); color: #000; }
.btn-save   { background: var(--accent-blue); color: #fff; }
.btn-muted  { background: var(--bg-card); color: var(--text-dim); border: 1px solid var(--border); }
.btn-export { background: var(--bg-card); color: var(--accent-teal); border: 1px solid var(--border); font-size: 0.7rem; padding: 5px 10px; }
.btn-export:hover { border-color: var(--accent-teal); }
.btn-sm { font-size: 0.68rem; padding: 4px 10px; }

/* ─── Toast Notifications ──────────────────────────────────────── */
#toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10000;
    display: flex;
    flex-direction: column;
    gap: 8px;
    pointer-events: none;
}

.toast {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 20px;
    border-radius: var(--radius-sm);
    font-size: 0.82rem;
    font-weight: 600;
    color: var(--text);
    background: var(--bg-card);
    border: 1px solid var(--border);
    box-shadow: 0 8px 32px rgba(0,0,0,0.4);
    pointer-events: auto;
    opacity: 0;
    transform: translateX(100%);
    transition: opacity 0.3s, transform 0.3s;
    max-width: 380px;
}
.toast-show {
    opacity: 1;
    transform: translateX(0);
}
.toast-hide {
    opacity: 0;
    transform: translateX(100%);
}
.toast-icon { font-size: 1.1rem; }
.toast-msg { flex: 1; }

.toast-success { border-left: 4px solid var(--accent-green); }
.toast-error   { border-left: 4px solid var(--accent-red); }
.toast-info    { border-left: 4px solid var(--accent-blue); }
.toast-warning { border-left: 4px solid var(--accent-orange); }

/* ─── Confirmation Modal ──────────────────────────────────────── */
.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.65);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
}
.modal-box {
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 32px;
    max-width: 420px;
    width: 90%;
    box-shadow: 0 16px 48px rgba(0,0,0,0.5);
}
.modal-box h3 {
    font-size: 1.1rem;
    font-weight: 700;
    margin-bottom: 12px;
}
.modal-box p {
    color: var(--text-dim);
    font-size: 0.88rem;
    margin-bottom: 24px;
    line-height: 1.5;
}
.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

/* ─── Config Editor ────────────────────────────────────────────── */
.config-hint {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: 16px;
    line-height: 1.5;
}
.config-hint strong { color: var(--accent-blue); }

/* Config Tabs */
.config-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 20px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
}
.config-tab {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-dim);
    font-size: 0.72rem;
    font-weight: 600;
    padding: 6px 12px;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}
.config-tab:hover {
    border-color: var(--accent-blue);
    color: var(--text);
}
.config-tab-active {
    background: rgba(76,141,255,0.15);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
}
.config-tab-dirty {
    position: relative;
}
.config-tab-dirty::after {
    content: '';
    position: absolute;
    top: 4px;
    right: 4px;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--accent-orange);
}

/* Config Editor Panel */
.config-editor {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 20px;
    border: 1px solid var(--border);
}
.config-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
}
.config-section-header h3 {
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--accent-blue);
}
.config-fields {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.config-field-row {
    display: grid;
    grid-template-columns: 240px 1fr;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid rgba(42, 45, 58, 0.3);
    gap: 16px;
}
.config-field-row:last-child { border-bottom: none; }
.config-field-label {
    font-size: 0.8rem;
    color: var(--text-dim);
    font-weight: 600;
    white-space: nowrap;
    cursor: default;
}
.config-field-input {
    display: flex;
    align-items: center;
}

/* Config Inputs */
.config-input {
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text);
    font-family: var(--font-mono);
    font-size: 0.8rem;
    padding: 7px 12px;
    width: 180px;
    transition: border-color 0.2s, box-shadow 0.2s;
}
.config-input:focus {
    outline: none;
    border-color: var(--border-focus);
    box-shadow: 0 0 0 2px rgba(76,141,255,0.15);
}
.config-input-wide { width: 100%; max-width: 400px; }
.config-textarea {
    width: 100%;
    max-width: 400px;
    font-size: 0.75rem;
    resize: vertical;
    min-height: 60px;
}
input[type="number"].config-input { width: 120px; }

/* Toggle Switch */
.toggle-switch {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    user-select: none;
}
.toggle-switch input { display: none; }
.toggle-slider {
    position: relative;
    width: 40px;
    height: 22px;
    background: var(--bg-table-row);
    border-radius: 11px;
    border: 1px solid var(--border);
    transition: background 0.3s;
}
.toggle-slider::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--text-muted);
    transition: transform 0.3s, background 0.3s;
}
.toggle-switch input:checked + .toggle-slider {
    background: rgba(0,214,143,0.2);
    border-color: var(--accent-green);
}
.toggle-switch input:checked + .toggle-slider::after {
    transform: translateX(18px);
    background: var(--accent-green);
}
.toggle-label {
    font-size: 0.78rem;
    font-weight: 600;
    font-family: var(--font-mono);
    color: var(--text-dim);
}

/* Old config grid (kept for backwards compat) */
.config-grid {
    /* overridden by config-editor when active */
}
.config-section {
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    padding: 16px;
}
.config-section h4 {
    font-size: 0.82rem;
    color: var(--accent-blue);
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
}
.config-row {
    display: flex;
    justify-content: space-between;
    padding: 4px 0;
    font-size: 0.8rem;
    border-bottom: 1px solid rgba(42, 45, 58, 0.3);
}
.config-row:last-child { border-bottom: none; }
.config-key { color: var(--text-dim); }
.config-val { font-family: var(--font-mono); font-weight: 600; }

/* ─── Footer ───────────────────────────────────────────────────── */
footer {
    display: flex;
    justify-content: space-between;
    padding: 20px 0;
    border-top: 1px solid var(--border);
    margin-top: 20px;
    font-size: 0.75rem;
    color: var(--text-muted);
}

/* ═══════════════════════════════════════════════════════════════
   DECISION INTELLIGENCE LOG
   ═══════════════════════════════════════════════════════════════ */

.decision-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    margin-bottom: 10px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    position: relative;
}
.decision-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(76,141,255,0.2), transparent);
    opacity: 0;
    transition: opacity 0.3s;
}
.decision-card:hover {
    border-color: rgba(76,141,255,0.35);
    box-shadow: 0 4px 24px rgba(0,0,0,0.3), 0 0 0 1px rgba(76,141,255,0.08);
    transform: translateY(-1px);
}
.decision-card:hover::before { opacity: 1; }
.decision-card.dc-trade { border-left: 4px solid var(--accent-green); }
.decision-card.dc-no-trade { border-left: 4px solid var(--accent-red); }
.decision-card.dc-skip { border-left: 4px solid var(--accent-orange); }

/* ── Card Header (collapsed) ── */
.dc-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    cursor: pointer;
    gap: 12px;
    user-select: none;
    transition: background 0.2s;
}
.dc-header:hover { background: rgba(37, 40, 56, 0.6); }

.dc-header-left {
    display: flex;
    align-items: center;
    gap: 10px;
    min-width: 0;
    flex: 1;
}
.dc-header-right {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-shrink: 0;
}

/* Grade Badge (collapsed) */
.dc-grade-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 800;
    width: 28px;
    height: 28px;
    border-radius: 6px;
    letter-spacing: -0.02em;
    flex-shrink: 0;
}
.dc-grade-badge.grade-a { background: linear-gradient(135deg, rgba(0,214,143,0.2), rgba(0,214,143,0.08)); color: #00d68f; border: 1px solid rgba(0,214,143,0.3); }
.dc-grade-badge.grade-b { background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(59,130,246,0.08)); color: #3b82f6; border: 1px solid rgba(59,130,246,0.3); }
.dc-grade-badge.grade-c { background: linear-gradient(135deg, rgba(245,158,11,0.2), rgba(245,158,11,0.08)); color: #f59e0b; border: 1px solid rgba(245,158,11,0.3); }
.dc-grade-badge.grade-d { background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(239,68,68,0.06)); color: #ef4444; border: 1px solid rgba(239,68,68,0.25); }
.dc-grade-badge.grade-f { background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(139,92,246,0.06)); color: #8b5cf6; border: 1px solid rgba(139,92,246,0.25); }

.dc-decision-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 0.68rem;
    font-weight: 700;
    padding: 4px 12px;
    border-radius: 6px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    white-space: nowrap;
}
.dc-decision-badge.dc-trade { background: linear-gradient(135deg, rgba(0,214,143,0.18), rgba(0,214,143,0.08)); color: var(--accent-green); }
.dc-decision-badge.dc-no-trade { background: linear-gradient(135deg, rgba(255,77,106,0.15), rgba(255,77,106,0.06)); color: var(--accent-red); }
.dc-decision-badge.dc-skip { background: linear-gradient(135deg, rgba(255,159,67,0.18), rgba(255,159,67,0.08)); color: var(--accent-orange); }

.dc-question {
    font-size: 0.82rem;
    font-weight: 600;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 0;
}

/* Category Badge */
.dc-category-badge {
    font-size: 0.62rem;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 10px;
    background: rgba(168,85,247,0.12);
    color: var(--accent-purple);
    white-space: nowrap;
    letter-spacing: 0.02em;
}

.dc-type-badge {
    font-size: 0.62rem;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 10px;
    background: rgba(76,141,255,0.12);
    color: var(--accent-blue);
    text-transform: uppercase;
    white-space: nowrap;
}

.dc-stages-mini {
    display: flex;
    gap: 2px;
}
.stage-dot {
    font-size: 0.65rem;
    width: 22px;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 5px;
    transition: transform 0.15s;
}
.stage-dot:hover { transform: scale(1.15); }
.stage-dot.stage-pass { background: rgba(0,214,143,0.12); }
.stage-dot.stage-block { background: rgba(255,77,106,0.12); }
.stage-dot.stage-skip { background: rgba(90,94,114,0.15); }

/* Mini Probability Bar */
.dc-mini-prob {
    display: flex;
    align-items: center;
    gap: 6px;
    min-width: 90px;
}
.dc-mini-prob-track {
    position: relative;
    width: 50px;
    height: 6px;
    background: rgba(255,255,255,0.06);
    border-radius: 3px;
    overflow: hidden;
}
.dc-mini-prob-implied {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: var(--accent-orange);
    opacity: 0.5;
    border-radius: 3px;
}
.dc-mini-prob-model {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: var(--accent-blue);
    border-radius: 3px;
    opacity: 0.8;
}
.dc-mini-prob-label {
    font-size: 0.6rem;
    font-family: var(--font-mono);
    color: var(--text-muted);
    white-space: nowrap;
}

/* Confidence Indicator */
.dc-conf-indicator {
    display: flex;
    align-items: center;
    gap: 4px;
}
.dc-conf-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    display: inline-block;
}
.dc-conf-text {
    font-size: 0.62rem;
    font-weight: 600;
    text-transform: capitalize;
    color: var(--text-muted);
}
.conf-high .dc-conf-dot { background: var(--accent-green); box-shadow: 0 0 6px rgba(0,214,143,0.4); }
.conf-high .dc-conf-text { color: var(--accent-green); }
.conf-med .dc-conf-dot { background: var(--accent-orange); box-shadow: 0 0 6px rgba(255,159,67,0.4); }
.conf-med .dc-conf-text { color: var(--accent-orange); }
.conf-low .dc-conf-dot { background: var(--accent-red); box-shadow: 0 0 6px rgba(255,77,106,0.4); }
.conf-low .dc-conf-text { color: var(--accent-red); }
.conf-none .dc-conf-dot { background: var(--text-muted); }

.dc-metric {
    font-size: 0.75rem;
    font-family: var(--font-mono);
    font-weight: 600;
    white-space: nowrap;
}
.dc-metric-label {
    font-size: 0.6rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-right: 3px;
}
.dc-time {
    font-size: 0.68rem;
    color: var(--text-muted);
    font-family: var(--font-mono);
    white-space: nowrap;
}
.dc-expand-icon {
    font-size: 0.65rem;
    color: var(--text-muted);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    width: 16px;
    text-align: center;
}

/* ── Card Detail (expanded) ── */
.dc-detail {
    border-top: 1px solid var(--border);
    padding: 0;
    background: linear-gradient(180deg, rgba(15,17,23,0.5) 0%, rgba(22,25,34,0.3) 100%);
}

/* ═══ DECISION SUMMARY PANEL ═══ */
.dc-summary-panel {
    padding: 20px 24px;
    background: linear-gradient(135deg, rgba(22,25,34,0.8), rgba(26,29,39,0.6));
    border-bottom: 1px solid var(--border);
    position: relative;
    overflow: hidden;
}
.dc-summary-panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(ellipse at top right, rgba(76,141,255,0.04), transparent 60%);
    pointer-events: none;
}
.dc-summary-panel.dc-trade::before { background: radial-gradient(ellipse at top right, rgba(0,214,143,0.05), transparent 60%); }
.dc-summary-panel.dc-no-trade::before { background: radial-gradient(ellipse at top right, rgba(255,77,106,0.04), transparent 60%); }

.dc-summary-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 16px;
}

.dc-summary-verdict {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    flex: 1;
}
.dc-verdict-icon {
    font-size: 1.8rem;
    line-height: 1;
    flex-shrink: 0;
}
.dc-verdict-label {
    font-size: 0.6rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 4px;
}
.dc-verdict-text {
    font-size: 0.88rem;
    font-weight: 600;
    color: var(--text);
    line-height: 1.4;
}

/* Grade Circle */
.dc-summary-grade {
    flex-shrink: 0;
}
.dc-grade-circle {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
}
.dc-grade-circle.grade-a {
    background: linear-gradient(135deg, rgba(0,214,143,0.15), rgba(0,214,143,0.05));
    border: 2px solid rgba(0,214,143,0.4);
    box-shadow: 0 0 20px rgba(0,214,143,0.1);
}
.dc-grade-circle.grade-b {
    background: linear-gradient(135deg, rgba(59,130,246,0.15), rgba(59,130,246,0.05));
    border: 2px solid rgba(59,130,246,0.4);
    box-shadow: 0 0 20px rgba(59,130,246,0.1);
}
.dc-grade-circle.grade-c {
    background: linear-gradient(135deg, rgba(245,158,11,0.15), rgba(245,158,11,0.05));
    border: 2px solid rgba(245,158,11,0.4);
    box-shadow: 0 0 20px rgba(245,158,11,0.1);
}
.dc-grade-circle.grade-d {
    background: linear-gradient(135deg, rgba(239,68,68,0.12), rgba(239,68,68,0.04));
    border: 2px solid rgba(239,68,68,0.35);
    box-shadow: 0 0 20px rgba(239,68,68,0.08);
}
.dc-grade-circle.grade-f {
    background: linear-gradient(135deg, rgba(139,92,246,0.12), rgba(139,92,246,0.04));
    border: 2px solid rgba(139,92,246,0.35);
    box-shadow: 0 0 20px rgba(139,92,246,0.08);
}
.dc-grade-letter {
    font-size: 1.3rem;
    font-weight: 800;
    line-height: 1;
}
.dc-grade-circle.grade-a .dc-grade-letter { color: #00d68f; }
.dc-grade-circle.grade-b .dc-grade-letter { color: #3b82f6; }
.dc-grade-circle.grade-c .dc-grade-letter { color: #f59e0b; }
.dc-grade-circle.grade-d .dc-grade-letter { color: #ef4444; }
.dc-grade-circle.grade-f .dc-grade-letter { color: #8b5cf6; }
.dc-grade-score {
    font-size: 0.55rem;
    font-weight: 600;
    color: var(--text-muted);
    font-family: var(--font-mono);
    margin-top: 2px;
}

/* Full question in expanded view */
.dc-summary-question {
    margin-bottom: 16px;
    padding: 10px 14px;
    background: rgba(255,255,255,0.03);
    border-radius: 8px;
    border-left: 3px solid var(--accent-blue);
}
.dc-full-question {
    font-size: 0.88rem;
    font-weight: 600;
    color: var(--text);
    line-height: 1.5;
}

/* Summary Metrics Grid */
.dc-summary-metrics {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 10px;
    margin-bottom: 16px;
}
.dc-summary-metric {
    background: rgba(255,255,255,0.03);
    border-radius: 8px;
    padding: 10px 12px;
    border: 1px solid rgba(255,255,255,0.04);
    transition: border-color 0.2s;
}
.dc-summary-metric:hover {
    border-color: rgba(76,141,255,0.2);
}
.dc-sm-label {
    font-size: 0.58rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 4px;
}
.dc-sm-value {
    font-size: 0.95rem;
    font-weight: 700;
    font-family: var(--font-mono);
    color: var(--text);
    margin-bottom: 6px;
}
.dc-sm-bar {
    height: 4px;
    background: rgba(255,255,255,0.06);
    border-radius: 2px;
    overflow: hidden;
}
.dc-sm-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}
.dc-sm-market { background: linear-gradient(90deg, var(--accent-orange), #ffb366); }
.dc-sm-model { background: linear-gradient(90deg, var(--accent-blue), #6cb0ff); }
.dc-sm-edge { background: linear-gradient(90deg, var(--accent-green), #33e5a5); }
.dc-sm-eq { background: linear-gradient(90deg, var(--accent-purple), #c084fc); }
.dc-sm-conf { background: linear-gradient(90deg, var(--accent-teal), #2dd4bf); }
.dc-sm-research { background: linear-gradient(90deg, var(--accent-pink), #f9a8d4); }

/* Summary Bottom */
.dc-summary-bottom {
    display: flex;
    gap: 20px;
    align-items: flex-start;
}
.dc-summary-reasons {
    flex: 1;
}
.dc-reasons-title {
    font-size: 0.72rem;
    font-weight: 700;
    color: var(--text-dim);
    margin-bottom: 8px;
}
.dc-reasons-list {
    list-style: none;
    padding: 0;
    margin: 0;
}
.dc-reasons-list li {
    font-size: 0.78rem;
    color: var(--text-dim);
    padding: 4px 0 4px 16px;
    position: relative;
    line-height: 1.4;
}
.dc-reasons-list li::before {
    content: '→';
    position: absolute;
    left: 0;
    color: var(--accent-blue);
    font-weight: 700;
}

/* Pipeline Completeness Ring */
.dc-summary-completeness {
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}
.dc-completeness-title {
    font-size: 0.58rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
}
.dc-completeness-ring {
    width: 56px;
    height: 56px;
}
.dc-circular-chart {
    width: 100%;
    height: 100%;
}
.dc-circle-bg {
    fill: none;
    stroke: rgba(255,255,255,0.06);
    stroke-width: 3;
}
.dc-circle-fill {
    fill: none;
    stroke-width: 3;
    stroke-linecap: round;
    animation: dc-progress 1s ease-out forwards;
    transform: rotate(-90deg);
    transform-origin: 50% 50%;
}
.dc-circle-fill.grade-a { stroke: #00d68f; }
.dc-circle-fill.grade-b { stroke: #3b82f6; }
.dc-circle-fill.grade-c { stroke: #f59e0b; }
.dc-circle-fill.grade-d { stroke: #ef4444; }
.dc-circle-fill.grade-f { stroke: #8b5cf6; }
@keyframes dc-progress {
    0% { stroke-dasharray: 0, 100; }
}
.dc-circle-text {
    fill: var(--text);
    font-size: 0.55rem;
    font-weight: 700;
    text-anchor: middle;
    font-family: var(--font-mono);
}
.dc-completeness-label {
    font-size: 0.6rem;
    color: var(--text-muted);
    font-weight: 600;
}

/* ═══ PIPELINE STAGES ═══ */
.dc-pipeline-section {
    padding: 16px 20px 20px;
}
.dc-pipeline-title {
    font-size: 0.78rem;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 12px;
    letter-spacing: 0.02em;
}

.dc-pipeline {
    display: flex;
    align-items: flex-start;
    gap: 0;
    overflow-x: auto;
    padding: 4px 0;
}

.dc-stage {
    flex: 1;
    min-width: 180px;
    background: var(--bg-panel);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    overflow: hidden;
    transition: box-shadow 0.2s, transform 0.2s;
}
.dc-stage:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    transform: translateY(-1px);
}
.dc-stage.stage-pass { border-top: 3px solid var(--accent-green); }
.dc-stage.stage-block { border-top: 3px solid var(--accent-red); }
.dc-stage.stage-skip { border-top: 3px solid var(--text-muted); }

.dc-stage-header {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 12px;
    border-bottom: 1px solid var(--border);
    background: rgba(26, 29, 39, 0.6);
}
.dc-stage-icon { font-size: 0.9rem; }
.dc-stage-name {
    font-size: 0.72rem;
    font-weight: 700;
    color: var(--text);
    flex: 1;
}
.dc-stage-number {
    font-size: 0.55rem;
    font-weight: 600;
    color: var(--text-muted);
    font-family: var(--font-mono);
}
.dc-stage-status-pill {
    font-size: 0.55rem;
    font-weight: 700;
    padding: 2px 7px;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
}
.dc-stage-status-pill.stage-pass { background: rgba(0,214,143,0.15); color: var(--accent-green); }
.dc-stage-status-pill.stage-block { background: rgba(255,77,106,0.12); color: var(--accent-red); }
.dc-stage-status-pill.stage-skip { background: rgba(90,94,114,0.2); color: var(--text-muted); }

.dc-stage-body {
    padding: 10px 12px;
    font-size: 0.78rem;
}

/* Stage Connector (enhanced) */
.dc-stage-connector {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-width: 28px;
    align-self: center;
    gap: 0;
    padding: 0 2px;
}
.dc-connector-line {
    width: 16px;
    height: 2px;
    background: linear-gradient(90deg, var(--border), var(--text-muted), var(--border));
    border-radius: 1px;
}
.dc-connector-arrow {
    font-size: 1.1rem;
    color: var(--text-muted);
    line-height: 1;
    margin-top: -4px;
    font-weight: 300;
}

/* Key-Value Grid */
.dc-kv-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 8px;
}
.dc-kv {
    background: var(--bg-card);
    border-radius: 4px;
    padding: 4px 10px;
    display: flex;
    align-items: center;
    gap: 6px;
}
.dc-kv-label {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.03em;
}
.dc-kv-value {
    font-size: 0.78rem;
    font-weight: 600;
    font-family: var(--font-mono);
}

/* Probability Comparison Bars */
.dc-prob-compare {
    margin: 10px 0;
}
.dc-prob-bar-wrap {
    margin-bottom: 6px;
}
.dc-prob-label {
    font-size: 0.68rem;
    color: var(--text-dim);
    margin-bottom: 3px;
    font-weight: 600;
}
.dc-prob-bar-track {
    background: #252838;
    border-radius: 4px;
    height: 8px;
    overflow: hidden;
}
.dc-prob-bar {
    height: 100%;
    border-radius: 4px;
    transition: width 0.6s ease;
}
.dc-prob-implied { background: var(--accent-orange); }
.dc-prob-model { background: var(--accent-blue); }

/* Evidence Bullets */
.dc-evidence-list {
    margin-top: 8px;
}
.dc-evidence-title, .dc-reasoning-title, .dc-triggers-title, .dc-violations-title {
    font-size: 0.72rem;
    font-weight: 700;
    color: var(--text-dim);
    margin-bottom: 6px;
}
.dc-evidence-item {
    background: var(--bg-card);
    border-radius: 6px;
    padding: 10px 12px;
    margin-bottom: 6px;
    border-left: 3px solid var(--accent-blue);
    transition: border-color 0.2s;
}
.dc-evidence-item:hover {
    border-left-color: var(--accent-green);
}
.dc-evidence-item.dc-evidence-numeric {
    border-left-color: var(--accent-orange);
}
.dc-evidence-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 4px;
    flex-wrap: wrap;
}
.dc-evidence-text {
    font-size: 0.78rem;
    color: var(--text);
    line-height: 1.5;
}
.dc-evidence-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 6px;
    flex-wrap: wrap;
}

/* Impact badges */
.dc-impact-badge {
    font-size: 0.6rem;
    font-weight: 700;
    padding: 1px 6px;
    border-radius: 3px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}
.dc-impact-supports {
    background: rgba(0,214,143,0.15);
    color: var(--accent-green);
}
.dc-impact-opposes {
    background: rgba(255,77,106,0.12);
    color: var(--accent-red);
}
.dc-impact-neutral {
    background: rgba(255,255,255,0.06);
    color: var(--text-muted);
}

.dc-relevance {
    font-size: 0.6rem;
    font-weight: 700;
    padding: 1px 5px;
    border-radius: 3px;
    background: rgba(0,214,143,0.12);
    color: var(--accent-green);
}
.dc-confidence-badge {
    font-size: 0.6rem;
    font-weight: 600;
    padding: 1px 5px;
    border-radius: 3px;
    background: rgba(59,130,246,0.12);
    color: var(--accent-blue);
}
.dc-numeric-badge {
    font-size: 0.6rem;
    font-weight: 600;
    padding: 1px 6px;
    border-radius: 3px;
    background: rgba(245,158,11,0.12);
    color: var(--accent-orange);
}

/* Source links */
.dc-source-link {
    font-size: 0.68rem;
    color: var(--accent-blue);
    text-decoration: none;
    transition: color 0.15s;
    word-break: break-all;
}
.dc-source-link:hover {
    color: var(--accent-green);
    text-decoration: underline;
}
.dc-publisher {
    font-size: 0.65rem;
    color: var(--text-dim);
    font-weight: 600;
    padding: 1px 5px;
    border-radius: 3px;
    background: rgba(255,255,255,0.05);
}
.dc-source-date {
    font-size: 0.62rem;
    color: var(--text-muted);
    font-style: italic;
}
.dc-citation {
    font-size: 0.65rem;
    color: var(--text-muted);
    font-style: italic;
}

/* Quality breakdown */
.dc-quality-breakdown {
    margin-top: 8px;
    margin-bottom: 8px;
}
.dc-quality-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 3px;
}
.dc-quality-label {
    font-size: 0.65rem;
    color: var(--text-dim);
    width: 90px;
    flex-shrink: 0;
    text-align: right;
}
.dc-quality-track {
    flex: 1;
    height: 6px;
    background: rgba(255,255,255,0.06);
    border-radius: 3px;
    overflow: hidden;
}
.dc-quality-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.4s ease;
}
.dc-quality-val {
    font-size: 0.62rem;
    color: var(--text-muted);
    width: 32px;
    text-align: right;
    flex-shrink: 0;
}

/* Research summary */
.dc-research-summary {
    margin-top: 8px;
    background: var(--bg-card);
    border-radius: 4px;
    padding: 10px 12px;
    border-left: 2px solid var(--accent-green);
}
.dc-summary-text {
    font-size: 0.76rem;
    color: var(--text-dim);
    line-height: 1.5;
}

/* Contradictions */
.dc-contradictions {
    margin-top: 8px;
}
.dc-contradiction-item {
    background: rgba(255,77,106,0.05);
    border-radius: 4px;
    padding: 8px 10px;
    margin-bottom: 4px;
    border-left: 2px solid var(--accent-orange);
}
.dc-contradiction-claim {
    font-size: 0.74rem;
    color: var(--text-dim);
    padding: 2px 0;
}
.dc-contra-label {
    font-weight: 700;
    color: var(--text-muted);
    font-size: 0.65rem;
    text-transform: uppercase;
    margin-right: 4px;
}
.dc-contradiction-desc {
    font-size: 0.7rem;
    color: var(--text-muted);
    font-style: italic;
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px solid rgba(255,255,255,0.05);
}

/* Reasoning */
.dc-reasoning {
    margin-top: 10px;
    background: var(--bg-card);
    border-radius: 4px;
    padding: 10px 12px;
    border-left: 2px solid var(--accent-purple);
}
.dc-reasoning-text {
    font-size: 0.78rem;
    color: var(--text-dim);
    line-height: 1.55;
    white-space: pre-wrap;
    word-break: break-word;
}

/* Invalidation Triggers */
.dc-triggers {
    margin-top: 8px;
}
.dc-triggers-list {
    list-style: none;
    padding: 0;
    margin: 0;
}
.dc-triggers-list li {
    font-size: 0.75rem;
    color: var(--accent-orange);
    padding: 3px 0;
    padding-left: 14px;
    position: relative;
}
.dc-triggers-list li::before {
    content: '⚡';
    position: absolute;
    left: 0;
    font-size: 0.65rem;
}

/* Violations */
.dc-violations {
    margin-top: 6px;
}
.dc-violation-item {
    font-size: 0.75rem;
    color: var(--accent-red);
    background: rgba(255,77,106,0.08);
    border-radius: 4px;
    padding: 6px 10px;
    margin-bottom: 3px;
    border-left: 2px solid var(--accent-red);
}
.dc-reason-text {
    font-size: 0.76rem;
    color: var(--text-dim);
    margin-top: 4px;
}

/* ─── Responsive ───────────────────────────────────────────────── */
@media (max-width: 1200px) {
    .dc-summary-metrics { grid-template-columns: repeat(3, 1fr); }
}
@media (max-width: 1100px) {
    .charts-row { grid-template-columns: 1fr 1fr; }
    .chart-container.chart-small { grid-column: span 2; }
    .config-field-row { grid-template-columns: 180px 1fr; }
}
@media (max-width: 768px) {
    body { padding: 0 12px 24px; }
    header { flex-direction: column; gap: 8px; align-items: flex-start; }
    .card-grid { grid-template-columns: repeat(2, 1fr); }
    .charts-row { grid-template-columns: 1fr; }
    .chart-container.chart-small { grid-column: span 1; }
    .panel-header { flex-direction: column; align-items: flex-start; }
    .panel-tools { width: 100%; }
    .search-input { width: 100%; }
    .config-field-row { grid-template-columns: 1fr; gap: 4px; }
    .config-tabs { gap: 4px; }
    .config-tab { font-size: 0.65rem; padding: 5px 8px; }
    .dc-pipeline { flex-direction: column; }
    .dc-stage-connector { transform: rotate(90deg); padding: 4px 0; }
    .dc-header { flex-direction: column; align-items: flex-start; gap: 8px; }
    .dc-header-right { flex-wrap: wrap; }
    .dc-summary-metrics { grid-template-columns: repeat(2, 1fr); }
    .dc-summary-header { flex-direction: column; }
    .dc-summary-bottom { flex-direction: column; }
    .dc-mini-prob { display: none; }
    .dc-category-badge { display: none; }
}

/* ─── Performance Analytics ────────────────────────────────────── */
#analytics-panel .analytics-cards {
    margin-bottom: 16px;
}

#analytics-panel .charts-row {
    margin-top: 8px;
}

#leaderboard-table th:first-child { width: 50px; text-align: center; }
#leaderboard-table td:first-child { text-align: center; font-weight: 700; }

.leaderboard-rank {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    font-size: 0.8rem;
    font-weight: 700;
}
.leaderboard-rank.rank-1 { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #1a1d27; }
.leaderboard-rank.rank-2 { background: linear-gradient(135deg, #94a3b8, #64748b); color: #1a1d27; }
.leaderboard-rank.rank-3 { background: linear-gradient(135deg, #cd7f32, #a0522d); color: #fff; }
.leaderboard-rank.rank-other { background: var(--bg-table-row); color: var(--text-dim); }

/* ─── Market Regime ────────────────────────────────────────────── */
#regime-panel .card-grid {
    grid-template-columns: repeat(3, 1fr);
}

.regime-badge {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.regime-NORMAL { background: rgba(76, 141, 255, 0.2); color: var(--accent-blue); }
.regime-TRENDING { background: rgba(0, 214, 143, 0.2); color: var(--accent-green); }
.regime-MEAN_REVERTING { background: rgba(168, 85, 247, 0.2); color: var(--accent-purple); }
.regime-HIGH_VOLATILITY { background: rgba(255, 77, 106, 0.2); color: var(--accent-red); }
.regime-LOW_ACTIVITY { background: rgba(139, 143, 163, 0.2); color: var(--text-dim); }
